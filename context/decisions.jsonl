{"id":"DEC-0000","ts":"2026-02-06T00:00:00-06:00","actor":"user","decision":"Use context/decisions.jsonl as the authoritative decision log.","status":"approved","context":{"workflow":"meta","step":"setup","refs":[],"reason":"persistent context graph","options":[],"chosen":"jsonl"}}{"id": "DEC-0001", "ts": "2026-02-06T22:38:00-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Use PyTorch as the ML framework for all RL implementations", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding constraint established in high-level architecture document", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0001", "ts": "2026-02-06T22:38:01-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Target hardware is NVIDIA GH200 (ARM + Hopper GPU); all dependencies MUST support aarch64", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding constraint established in high-level architecture document", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0002", "ts": "2026-02-06T22:38:03-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Game state representation uses one-hot encoding with shape (N, 16, 17) for N parallel games", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding interface contract established in high-level architecture document", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0003", "ts": "2026-02-06T22:38:04-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Episode boundary handling: when done=True, next_state MUST be terminal state (not new game start); replay buffers MUST NOT contain cross-episode transitions", "context": {"workflow": "meta", "step": "design-docs", "reason": "Critical invariant established in high-level architecture document", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0004", "ts": "2026-02-06T22:38:05-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Tile spawning follows standard 2048 rules: 2 (90%) or 4 (10%) at random empty cell after each valid move", "context": {"workflow": "meta", "step": "design-docs", "reason": "Game mechanics specification established in high-level architecture document", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0005", "ts": "2026-02-06T23:16:18-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Algorithm modules MUST be self-contained in algorithms/<name>/ with run.py as required entry point", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding convention established in high-level architecture document section 7.1", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0006", "ts": "2026-02-06T23:16:20-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Algorithm run.py MUST implement train(env_factory, config_path) -> TrainingResult and evaluate(env_factory, checkpoint_path, num_games) -> EvalResult", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding interface contract established in high-level architecture document section 7.2", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0007", "ts": "2026-02-06T23:16:21-06:00", "actor": "design-doc-author", "status": "approved", "decision": "DDPG, TD3, and SAC algorithms are excluded from implementation scope (continuous action space incompatible with discrete 2048)", "context": {"workflow": "meta", "step": "design-docs", "reason": "Explicit exclusion established in high-level architecture document section 7.3", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0008", "ts": "2026-02-06T23:16:23-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Representation module interface requires __init__(config), forward(state) -> Tensor, and output_shape() -> tuple methods", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding interface contract established in high-level architecture document section 8.2", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0009", "ts": "2026-02-06T23:16:24-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Experimental matrix structure is (Algorithm, Input Representation, Reward Type) tuples with systematic hyperparameter tuning per combination", "context": {"workflow": "meta", "step": "design-docs", "reason": "Experimental design framework established in high-level architecture document section 9", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0010", "ts": "2026-02-06T23:25:56-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Hyperparameter tuning library is Optuna with SQLite storage", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding constraint established in high-level architecture document section 9.2", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0011", "ts": "2026-02-06T23:25:57-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Each (Algorithm, Representation, Reward) combination gets its own Optuna study", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding structural decision established in high-level architecture document section 9.2", "refs": ["file:design/high-level-architecture.md", "DEC-0009"]}}
{"id": "DEC-0012", "ts": "2026-02-06T23:25:58-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Optuna pruning uses MedianPruner with n_startup_trials=5, n_warmup_steps=10, interval_steps=5", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding configuration established in high-level architecture document section 9.2", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0013", "ts": "2026-02-06T23:40:19-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Game environment MUST be developed test-first: comprehensive unit tests written BEFORE implementation begins", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding development methodology established in high-level architecture document section 10", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0014", "ts": "2026-02-06T23:40:20-06:00", "actor": "design-doc-author", "status": "approved", "decision": "GameEnv MUST raise exception on invalid move (action that causes no board change); algorithms handle via penalty, force valid, etc.", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding game rule invariant established in high-level architecture document section 10.3", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0015", "ts": "2026-02-06T23:40:21-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Each tile MUST merge at most once per move ([2,2,2,2] -> [4,4,0,0], NOT [8,0,0,0]); merges follow move direction", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding game rule invariant (merge-once) established in high-level architecture document section 10.3", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0016", "ts": "2026-02-06T23:40:22-06:00", "actor": "design-doc-author", "status": "approved", "decision": "GameEnv MUST support deterministic spawn injection via spawn_fn parameter for testing", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding interface contract for testability established in high-level architecture document section 10.1 and 10.2", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0017", "ts": "2026-02-06T23:40:24-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Milestone 1 defined as comprehensive test suite for GameEnv; all test categories from section 10.4 MUST be covered before implementation begins", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding milestone definition established in high-level architecture document section 11", "refs": ["file:design/high-level-architecture.md"]}}
{"id": "DEC-0018", "ts": "2026-02-06T23:54:35-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Milestones follow fail-fast approach: each milestone MUST validate its capability before proceeding to the next", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding project execution constraint established in milestones document", "refs": ["file:design/milestones.md"]}}
{"id": "DEC-0019", "ts": "2026-02-06T23:54:36-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Milestone 2 (GameEnv) success criteria: 100% test pass rate AND no CPU processing during game steps", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding acceptance criteria for GameEnv milestone established in milestones document", "refs": ["file:design/milestones.md", "DEC-0013"]}}
{"id": "DEC-0020", "ts": "2026-02-06T23:54:37-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Algorithm milestones (basic phase) success criteria: training runs without errors AND agent learns (score improves over random baseline)", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding acceptance criteria for algorithm implementation milestones established in milestones document", "refs": ["file:design/milestones.md"]}}
{"id": "DEC-0021", "ts": "2026-02-06T23:54:38-06:00", "actor": "design-doc-author", "status": "approved", "decision": "Full experimental sweep (Milestone 26) MUST cover all implemented algorithms x all representation types x both reward types with full Optuna tuning", "context": {"workflow": "meta", "step": "design-docs", "reason": "Binding experimental scope constraint established in milestones document", "refs": ["file:design/milestones.md", "DEC-0009", "DEC-0011"]}}
{"id": "DEC-0022", "ts": "2026-02-07T00:06:23-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Test suite uses pytest framework with one file per category (16 files) in tests/env/ directory", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for Milestone 1 test organization", "refs": ["file:design/high-level-architecture.md", "DEC-0017"]}}
{"id": "DEC-0023", "ts": "2026-02-07T00:06:24-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "GPU timing thresholds for GH200: N=100 step <1ms, N=1000 step <5ms, with proportional reset thresholds", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "Estimated from GH200 4TB/s bandwidth specs with 50% buffer", "refs": ["file:design/high-level-architecture.md", "DEC-0001"]}}
{"id": "DEC-0024", "ts": "2026-02-07T00:06:25-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Stub GameEnv raises NotImplementedError for pure fail-first TDD approach", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for test-first development strategy", "refs": ["file:design/high-level-architecture.md", "DEC-0013"]}}
{"id": "DEC-0025", "ts": "2026-02-07T00:06:26-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Test batch sizes: N=1 for unit tests, N=100 for batch/timing tests, N>1 for cross-contamination tests", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for appropriate test granularity", "refs": ["file:design/high-level-architecture.md", "DEC-0017"]}}
{"id": "DEC-0026", "ts": "2026-02-07T10:58:31-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "GameEnv module structure: game/env.py (main class), game/lookup_tables.py (precomputed tables), game/moves.py (move execution logic)", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for Milestone 2 module organization", "refs": ["file:design/high-level-architecture.md", "DEC-0019"]}}
{"id": "DEC-0027", "ts": "2026-02-07T10:58:32-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Batched invalid moves return per-game validity; only raise exception if ALL games have invalid move", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for batch invalid move handling", "refs": ["file:design/high-level-architecture.md", "DEC-0014"]}}
{"id": "DEC-0028", "ts": "2026-02-07T10:58:33-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Lookup tables generated at module import time (not lazy initialization)", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for table generation timing", "refs": ["file:design/high-level-architecture.md", "DEC-0019"]}}
{"id": "DEC-0029", "ts": "2026-02-07T10:58:34-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "GameEnv dtypes: game state (N,16,17) boolean, line transition (17,17,17,17,4,17) boolean, valid move (17,17,17,17) boolean, score delta (17,17,17,17) int32", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for tensor data types", "refs": ["file:design/high-level-architecture.md", "DEC-0019"]}}
{"id": "DEC-0030", "ts": "2026-02-07T10:58:35-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "GameEnv internal representation stores one-hot (N,16,17) boolean always; no integer board representation", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for internal state representation", "refs": ["file:design/high-level-architecture.md", "DEC-0019"]}}
{"id": "DEC-0031", "ts": "2026-02-07T10:58:37-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Branch strategy: merge M1 PR to development first, then create milestone-2-gameenv branch from development", "context": {"workflow": "Large Changes", "step": "Planning", "reason": "User decision for branch management", "refs": ["DEC-0017", "DEC-0019"]}}
{"id": "DEC-0032", "ts": "2026-02-07T10:58:38-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Always merge PR after PR reviewer approves or workflow agent approves", "context": {"workflow": "meta", "step": "process", "reason": "User-defined workflow rule for PR merge timing", "refs": []}}
{"id": "DEC-0033", "ts": "2026-02-07T15:54:35-06:00", "actor": "user", "status": "approved", "decision": "DQN Milestone 3 uses merge_reward only (spawn_reward excluded for this milestone)", "context": {"workflow": "Large Changes", "step": "Step 1", "reason": "User decision for Milestone 3 basic DQN configuration", "refs": ["file:design/milestones.md", "DEC-0020"]}}
{"id": "DEC-0034", "ts": "2026-02-07T15:54:36-06:00", "actor": "user", "status": "approved", "decision": "DQN uses mask-based invalid action handling: set invalid Q-values to -inf, select only from valid actions", "context": {"workflow": "Large Changes", "step": "Step 1", "reason": "User decision for action selection strategy", "refs": ["file:design/high-level-architecture.md", "DEC-0014"]}}
{"id": "DEC-0035", "ts": "2026-02-07T15:54:37-06:00", "actor": "user", "status": "approved", "decision": "DQN epsilon schedule: linear decay from 1.0 to 0.01 over 100k training steps", "context": {"workflow": "Large Changes", "step": "Step 1", "reason": "User decision for exploration strategy", "refs": ["file:design/milestones.md", "DEC-0020"]}}
{"id": "DEC-0036", "ts": "2026-02-07T15:54:38-06:00", "actor": "user", "status": "approved", "decision": "DQN uses hard target network update every N steps (not soft/Polyak update)", "context": {"workflow": "Large Changes", "step": "Step 1", "reason": "User decision for target network synchronization strategy", "refs": ["file:design/milestones.md", "DEC-0020"]}}
{"id": "DEC-0037", "ts": "2026-02-08T00:20:45-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Milestone 5 Spec Packet approved: 10 Optuna studies (5 repr x 2 rewards), tuning module with dynamic representation support, modified DQN to accept variable input sizes", "context": {"workflow": "Large Changes", "step": "Step 1", "reason": "Spec packet aligned with DEC-0009 through DEC-0012 and user-approved parameters (50 trials, 300 epochs, 2500 steps/epoch, 4 parallel trials)", "refs": ["DEC-0009", "DEC-0010", "DEC-0011", "DEC-0012", "DEC-0033", "DEC-0034", "DEC-0035", "DEC-0036"]}}
{"id": "DEC-0038", "ts": "2026-02-08T10:08:01-06:00", "actor": "workflow-orchestrator", "status": "approved", "decision": "Lookup tables generated directly on CUDA device at import time; fail fast if CUDA unavailable", "context": {"workflow": "Small Changes", "step": "Implementation", "reason": "Bug fix: tables were generating on CPU causing 5+ minute delay on first run. User approved Option 3 (Always GPU) since target hardware is GH200 (DEC-0001)", "refs": ["DEC-0028"]}}
